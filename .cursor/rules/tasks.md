# Task Management Rules

## Обзор

Все задачи проекта управляются через систему задач:
- **TODOS.md** - список всех задач с порядковыми номерами
- **tasks/** - директория с подробными описаниями задач
- **Ветки**: `task-XXX` где XXX - номер задачи

## Kanban статусы

Все задачи используют Kanban статусы для отслеживания прогресса:

- **todo**: Задача в очереди, создана, но еще не начата
- **in_progress**: Задача в процессе разработки
- **review**: Задача на проверке (code review, тестирование)
- **done**: Задача завершена и замержена в dev
- **cancelled**: Задача отменена

**Типичный workflow**: `todo` → `in_progress` → `review` → `done`

## Процесс создания задачи

### Шаг 1: Добавить задачу в TODOS.md

1. Открыть `TODOS.md`
2. Определить следующий порядковый номер (например, Task-002)
3. Добавить запись в формате:

```markdown
## Task-002: Название задачи

**Статус**: todo
**Приоритет**: high | medium | low
**Тип**: feat | fix | docs | refactor | test | chore
**Область**: web | api | infra | docker | deps
**Создано**: YYYY-MM-DD
**Завершено**: -

Краткое описание задачи.

**Файл задачи**: `tasks/task-002.md`
**Ветка**: `task-002`
```

### Шаг 2: Создать файл задачи

1. Создать файл `tasks/task-XXX.md`
2. Заполнить по шаблону:

```markdown
# Task-XXX: Название задачи

**Статус**: todo
**Приоритет**: high
**Тип**: feat
**Область**: api
**Создано**: 2024-01-15
**Завершено**: -

## Описание

Подробное описание задачи. Что нужно сделать и зачем.

## Требования

- Требование 1: Описание
- Требование 2: Описание
- Требование 3: Описание

## Технические детали

Детальное техническое описание:
- Какие компоненты затронуты
- Какие API/интерфейсы нужно создать/изменить
- Какие зависимости нужны
- Архитектурные решения

## Критерии приемки

- [ ] Критерий 1: Описание
- [ ] Критерий 2: Описание
- [ ] Критерий 3: Описание
- [ ] Все тесты проходят
- [ ] Линтеры пройдены
- [ ] Документация обновлена

## Заметки

Дополнительные заметки, ссылки, примеры.

## Связанные задачи

- Task-YYY: Связанная задача
- Task-ZZZ: Зависимая задача
```

### Шаг 3: Закоммитить задачу в dev

```bash
# Убедиться что на dev
git checkout dev
git pull origin dev

# Добавить файлы задачи
git add TODOS.md tasks/task-XXX.md

# Закоммитить
git commit -m "chore: add task-XXX to todos"

# Запушить в dev
git push origin dev
```

**Важно**: Задача должна быть закоммичена в dev перед созданием ветки разработки.

### Шаг 4: Создать ветку разработки

```bash
# Убедиться что dev актуальна
git checkout dev
git pull origin dev

# Создать ветку с номером задачи
git checkout -b task-XXX

# Пример:
# git checkout -b task-002
```

### Шаг 5: Разработка

Работать в ветке `task-XXX`, делать коммиты по мере выполнения работы.

## Статусы задач (Kanban стиль)

### todo
Задача в очереди, создана, но еще не начата. Начальное состояние новой задачи.

```markdown
**Статус**: todo
```

### in_progress
Задача в процессе разработки. Обновлять статус когда начинаете работу над задачей:

```markdown
**Статус**: in_progress
```

### review
Задача на проверке. Используется когда:
- Код готов и отправлен на code review
- Задача проходит тестирование
- Ожидается проверка перед merge

```markdown
**Статус**: review
```

### done
Задача завершена и замержена в dev. Обновлять после успешного merge:

```markdown
**Статус**: done
**Завершено**: YYYY-MM-DD
```

### cancelled
Задача отменена. Обновлять если задача больше не актуальна:

```markdown
**Статус**: cancelled
**Завершено**: YYYY-MM-DD
```

## Обновление статуса задачи

### При начале работы (todo → in_progress)

```bash
# Обновить в tasks/task-XXX.md:
# **Статус**: in_progress

# Обновить в TODOS.md:
# **Статус**: in_progress

# Закоммитить
git add TODOS.md tasks/task-XXX.md
git commit -m "chore: mark task-XXX as in_progress"
```

### Перед code review (in_progress → review)

Когда код готов и отправляется на проверку:

```bash
# Обновить в tasks/task-XXX.md:
# **Статус**: review

# Обновить в TODOS.md:
# **Статус**: review

# Закоммитить
git add TODOS.md tasks/task-XXX.md
git commit -m "chore: mark task-XXX as review"
```

### При завершении задачи (review → done)

После успешного merge в dev:

```bash
# Обновить в tasks/task-XXX.md:
# **Статус**: done
# **Завершено**: YYYY-MM-DD

# Обновить в TODOS.md:
# **Статус**: done
# **Завершено**: YYYY-MM-DD

# Закоммитить в dev
git checkout dev
git pull origin dev
git add TODOS.md tasks/task-XXX.md
git commit -m "chore: mark task-XXX as done"
git push origin dev
```

## Нумерация задач

- Задачи нумеруются последовательно: Task-001, Task-002, Task-003, ...
- Номера не переиспользуются
- Если задача отменена, номер остается, но статус меняется на cancelled

## Связанные задачи

В файле задачи можно указывать связанные задачи:

```markdown
## Связанные задачи

- Task-005: Предыдущая задача (блокирует)
- Task-010: Следующая задача (зависит от этой)
```

## Правила

1. **Всегда создавать задачу перед началом работы**: Не начинать разработку без задачи в TODOS.md
2. **Коммитить задачу в dev перед созданием ветки**: Задача должна быть в dev перед веткой
3. **Обновлять статус**: Регулярно обновлять статус задачи по мере работы
4. **Подробное описание**: Файл задачи должен содержать достаточно информации для понимания задачи
5. **Один номер = одна задача**: Не использовать один номер для нескольких задач

