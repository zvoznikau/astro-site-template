---
---

<div id="cookie-consent" class="hidden fixed bottom-0 left-0 right-0 z-50 p-4 sm:p-6">
  <div class="max-w-screen-xl mx-auto">
    <div class="bg-base-100/50 backdrop-blur-md border border-base-content/20 rounded-2xl shadow-2xl p-6 sm:p-8">
      <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6">
        <div class="flex-1">
          <h3 class="text-lg font-bold text-base-content mb-2">Cookie Consent</h3>
          <p class="text-sm sm:text-base text-base-content/70 leading-relaxed">
            We use cookies to enhance your browsing experience, analyze site traffic, and personalize content. By clicking "Accept All", you consent to our use of cookies. 
            <a href="/cookies" class="text-blue-400 hover:text-blue-300 underline">Learn more</a>
          </p>
        </div>
        <div class="flex flex-col sm:flex-row gap-3 w-full sm:w-auto">
          <button
            id="cookie-accept-all"
            class="px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white font-semibold rounded-lg transition-all shadow-lg hover:shadow-blue-500/40 whitespace-nowrap"
          >
            Accept All
          </button>
          <button
            id="cookie-accept-essential"
            class="px-6 py-3 bg-base-content/10 hover:bg-base-content/20 text-base-content font-semibold rounded-lg transition-all border border-base-content/20 whitespace-nowrap"
          >
            Essential Only
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  (function() {
    const COOKIE_CONSENT_KEY = 'cookie-consent';
    const COOKIE_CONSENT_EXPIRY_DAYS = 365;
    
    const consentBanner = document.getElementById('cookie-consent');
    const acceptAllBtn = document.getElementById('cookie-accept-all');
    const acceptEssentialBtn = document.getElementById('cookie-accept-essential');
    
    if (!consentBanner || !acceptAllBtn || !acceptEssentialBtn) return;
    
    // Check if user has already given consent
    function hasConsent() {
      try {
        return localStorage.getItem(COOKIE_CONSENT_KEY) !== null;
      } catch (e) {
        return false;
      }
    }
    
    // Save consent
    function saveConsent(acceptAll = false) {
      try {
        const consentData = {
          accepted: true,
          acceptAll: acceptAll,
          timestamp: new Date().toISOString(),
          expiry: new Date(Date.now() + COOKIE_CONSENT_EXPIRY_DAYS * 24 * 60 * 60 * 1000).toISOString()
        };
        localStorage.setItem(COOKIE_CONSENT_KEY, JSON.stringify(consentData));
      } catch (e) {
        console.error('Failed to save cookie consent:', e);
      }
    }
    
    // Show banner if no consent
    function showBanner() {
      if (!hasConsent()) {
        consentBanner.classList.remove('hidden');
        consentBanner.classList.add('animate-slide-up');
      }
    }
    
    // Hide banner
    function hideBanner() {
      consentBanner.classList.add('hidden');
      consentBanner.classList.remove('animate-slide-up');
    }
    
    // Handle accept all
    acceptAllBtn.addEventListener('click', () => {
      saveConsent(true);
      hideBanner();
      // Initialize analytics if needed
      if (typeof gtag !== 'undefined') {
        gtag('consent', 'update', {
          'analytics_storage': 'granted'
        });
      }
    });
    
    // Handle accept essential only
    acceptEssentialBtn.addEventListener('click', () => {
      saveConsent(false);
      hideBanner();
      // Disable analytics if needed
      if (typeof gtag !== 'undefined') {
        gtag('consent', 'update', {
          'analytics_storage': 'denied'
        });
      }
    });
    
    // Show banner on page load
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', showBanner);
    } else {
      showBanner();
    }
  })();
</script>

<style>
  @keyframes slide-up {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  
  .animate-slide-up {
    animation: slide-up 0.3s ease-out;
  }
</style>

